/**
 * AgentForge Platform Theme - Single Source of Truth
 * Edit this file only; all pages (index, lab, process-builder) use it.
 * Theme is applied via data-theme on <html>; saved in localStorage key: agentforge-theme
 */
:root {
    /* === Main platform (index) === */
    --bg-primary: #0f0f17;
    --bg-secondary: #16161e;
    --bg-card: #1e1e2e;
    --bg-input: #2d2d3d;
    --border-color: #2d2d3d;
    --border-hover: #3d3d4d;
    --text-primary: #f1f5f9;
    --text-secondary: #94a3b8;
    --text-muted: #6b7280;
    --accent-primary: #8b5cf6;
    --accent-secondary: #667eea;
    --accent-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --success: #22c55e;
    --warning: #eab308;
    --danger: #ef4444;
    --sidebar-bg: #16161e;
    --sidebar-active: rgba(139, 92, 246, 0.3);
    /* Lab aliases */
    --accent-purple: #8b5cf6;
    --accent-blue: #667eea;
    --accent-green: #22c55e;
    --accent-orange: #eab308;
    /* Process Builder */
    --canvas-bg: #0f1419;
    --grid-color: rgba(255,255,255,0.03);
    --node-bg: #1a1f2e;
    --node-border: #2d3748;
    --connection-color: #6366f1;
    --trigger-color: #22c55e;
    --action-color: #3b82f6;
    --condition-color: #f59e0b;
    --approval-color: #ef4444;
    --loop-color: #8b5cf6;
    --end-color: #6b7280;
    --pb-bg: #0a0d12;
    --pb-toolbar: #111827;
    --pb-panel: #111827;
    --pb-text: #fff;
    --pb-muted: #9ca3af;
    --label-badge-bg: rgba(15, 23, 42, 0.92);
    --label-badge-border: rgba(148, 163, 184, 0.55);
    --label-badge-text: #f8fafc;
    --label-badge-shadow: 0 8px 22px rgba(15, 23, 42, 0.4);
    --tb-btn-secondary-bg: #1e293b;
    --tb-btn-secondary-text: #e2e8f0;
    --tb-btn-secondary-border: #334155;
    --tb-btn-secondary-hover: #334155;
    --tb-btn-primary-bg: #4f46e5;
    --tb-btn-primary-text: #ffffff;
    --tb-btn-primary-hover: #6366f1;
    --tb-btn-success-bg: #059669;
    --tb-btn-success-text: #ffffff;
    --tb-btn-success-hover: #10b981;
}

[data-theme="light"] {
    --bg-primary: #f8fafc;
    --bg-secondary: #f1f5f9;
    --bg-card: #ffffff;
    --bg-input: #e2e8f0;
    --border-color: #94a3b8;
    --border-hover: #64748b;
    --text-primary: #1e293b;
    --text-secondary: #475569;
    --text-muted: #64748b;
    --accent-primary: #7c3aed;
    --accent-secondary: #6366f1;
    --accent-gradient: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    --sidebar-bg: #ffffff;
    --sidebar-active: rgba(124, 58, 237, 0.15);
    --accent-purple: #7c3aed;
    --accent-blue: #6366f1;
    --accent-green: #16a34a;
    --accent-orange: #ca8a04;
    --canvas-bg: #f1f5f9;
    --grid-color: rgba(0,0,0,0.06);
    --node-bg: #ffffff;
    --node-border: #cbd5e1;
    --pb-bg: #f8fafc;
    --pb-toolbar: #ffffff;
    --pb-panel: #ffffff;
    --pb-text: #1e293b;
    --pb-muted: #64748b;
    --label-badge-bg: rgba(255, 255, 255, 0.96);
    --label-badge-border: rgba(100, 116, 139, 0.4);
    --label-badge-text: #0f172a;
    --label-badge-shadow: 0 8px 18px rgba(15, 23, 42, 0.12);
    --tb-btn-secondary-bg: #e2e8f0;
    --tb-btn-secondary-text: #1e293b;
    --tb-btn-secondary-border: #cbd5e1;
    --tb-btn-secondary-hover: #cbd5e1;
    --tb-btn-primary-bg: #4f46e5;
    --tb-btn-primary-text: #ffffff;
    --tb-btn-primary-hover: #6366f1;
    --tb-btn-success-bg: #059669;
    --tb-btn-success-text: #ffffff;
    --tb-btn-success-hover: #10b981;
}

[data-theme="ocean"] {
    --bg-primary: #e8f4f8;
    --bg-secondary: #dbeafe;
    --bg-card: #ffffff;
    --bg-input: #e0f2fe;
    --border-color: #7dd3fc;
    --border-hover: #0ea5e9;
    --text-primary: #0c4a6e;
    --text-secondary: #0369a1;
    --text-muted: #0284c7;
    --accent-primary: #6366f1;
    --accent-secondary: #8b5cf6;
    --accent-gradient: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
    --sidebar-bg: #dbeafe;
    --sidebar-active: rgba(99, 102, 241, 0.2);
    --accent-purple: #8b5cf6;
    --accent-blue: #6366f1;
    --accent-green: #0d9488;
    --accent-orange: #ea580c;
    --canvas-bg: #dbeafe;
    --grid-color: rgba(14,165,233,0.1);
    --node-bg: #ffffff;
    --node-border: #bae6fd;
    --pb-bg: #e8f4f8;
    --pb-toolbar: #ffffff;
    --pb-panel: #ffffff;
    --pb-text: #0c4a6e;
    --pb-muted: #0284c7;
    --label-badge-bg: rgba(12, 74, 110, 0.15);
    --label-badge-border: rgba(3, 105, 161, 0.35);
    --label-badge-text: #0c4a6e;
    --label-badge-shadow: 0 8px 18px rgba(12, 74, 110, 0.18);
    --tb-btn-secondary-bg: #0ea5e9;
    --tb-btn-secondary-text: #ffffff;
    --tb-btn-secondary-border: #0284c7;
    --tb-btn-secondary-hover: #0284c7;
    --tb-btn-primary-bg: #1d4ed8;
    --tb-btn-primary-text: #ffffff;
    --tb-btn-primary-hover: #2563eb;
    --tb-btn-success-bg: #047857;
    --tb-btn-success-text: #ffffff;
    --tb-btn-success-hover: #059669;
}

[data-theme="sunset"] {
    --bg-primary: #1a1a2e;
    --bg-secondary: #16213e;
    --bg-card: #1f2937;
    --bg-input: #374151;
    --border-color: #4b5563;
    --border-hover: #6b7280;
    --text-primary: #fef3c7;
    --text-secondary: #fcd34d;
    --text-muted: #f59e0b;
    --accent-primary: #f97316;
    --accent-secondary: #ef4444;
    --accent-gradient: linear-gradient(135deg, #f97316 0%, #ef4444 100%);
    --sidebar-bg: #16213e;
    --sidebar-active: rgba(249, 115, 22, 0.3);
    --accent-purple: #ea580c;
    --accent-blue: #ef4444;
    --accent-green: #22c55e;
    --accent-orange: #f97316;
    --canvas-bg: #16213e;
    --grid-color: rgba(251,191,36,0.08);
    --node-bg: #1f2937;
    --node-border: #4b5563;
    --pb-bg: #1a1a2e;
    --pb-toolbar: #16213e;
    --pb-panel: #1f2937;
    --pb-text: #fef3c7;
    --pb-muted: #f59e0b;
    --label-badge-bg: rgba(249, 115, 22, 0.18);
    --label-badge-border: rgba(249, 115, 22, 0.45);
    --label-badge-text: #fef3c7;
    --label-badge-shadow: 0 8px 22px rgba(249, 115, 22, 0.22);
    --tb-btn-secondary-bg: #78350f;
    --tb-btn-secondary-text: #fef3c7;
    --tb-btn-secondary-border: #92400e;
    --tb-btn-secondary-hover: #92400e;
    --tb-btn-primary-bg: #b45309;
    --tb-btn-primary-text: #ffffff;
    --tb-btn-primary-hover: #ea580c;
    --tb-btn-success-bg: #166534;
    --tb-btn-success-text: #ffffff;
    --tb-btn-success-hover: #15803d;
}

[data-theme="forest"] {
    --bg-primary: #0f1f13;
    --bg-secondary: #14291a;
    --bg-card: #1a3320;
    --bg-input: #234429;
    --border-color: #2d5a35;
    --border-hover: #3d7a45;
    --text-primary: #dcfce7;
    --text-secondary: #86efac;
    --text-muted: #4ade80;
    --accent-primary: #22c55e;
    --accent-secondary: #16a34a;
    --accent-gradient: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    --sidebar-bg: #14291a;
    --sidebar-active: rgba(34, 197, 94, 0.3);
    --accent-purple: #22c55e;
    --accent-blue: #16a34a;
    --accent-green: #15803d;
    --accent-orange: #eab308;
    --canvas-bg: #14291a;
    --grid-color: rgba(74,222,128,0.1);
    --node-bg: #1a3320;
    --node-border: #2d5a35;
    --pb-bg: #0f1f13;
    --pb-toolbar: #14291a;
    --pb-panel: #1a3320;
    --pb-text: #dcfce7;
    --pb-muted: #4ade80;
    --label-badge-bg: rgba(34, 197, 94, 0.16);
    --label-badge-border: rgba(74, 222, 128, 0.35);
    --label-badge-text: #dcfce7;
    --label-badge-shadow: 0 8px 20px rgba(34, 197, 94, 0.24);
    --tb-btn-secondary-bg: #14532d;
    --tb-btn-secondary-text: #dcfce7;
    --tb-btn-secondary-border: #166534;
    --tb-btn-secondary-hover: #166534;
    --tb-btn-primary-bg: #2563eb;
    --tb-btn-primary-text: #ffffff;
    --tb-btn-primary-hover: #3b82f6;
    --tb-btn-success-bg: #15803d;
    --tb-btn-success-text: #ffffff;
    --tb-btn-success-hover: #16a34a;
}

[data-theme="midnight"] {
    --bg-primary: #020617;
    --bg-secondary: #0f172a;
    --bg-card: #1e293b;
    --bg-input: #334155;
    --border-color: #475569;
    --border-hover: #64748b;
    --text-primary: #f8fafc;
    --text-secondary: #cbd5e1;
    --text-muted: #94a3b8;
    --accent-primary: #3b82f6;
    --accent-secondary: #2563eb;
    --accent-gradient: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    --sidebar-bg: #0f172a;
    --sidebar-active: rgba(59, 130, 246, 0.3);
    --accent-purple: #818cf8;
    --accent-blue: #3b82f6;
    --accent-green: #22c55e;
    --accent-orange: #eab308;
    --canvas-bg: #0f172a;
    --grid-color: rgba(59,130,246,0.08);
    --node-bg: #1e293b;
    --node-border: #475569;
    --pb-bg: #020617;
    --pb-toolbar: #0f172a;
    --pb-panel: #1e293b;
    --pb-text: #f8fafc;
    --pb-muted: #94a3b8;
    --label-badge-bg: rgba(15, 23, 42, 0.92);
    --label-badge-border: rgba(96, 165, 250, 0.45);
    --label-badge-text: #f8fafc;
    --label-badge-shadow: 0 8px 24px rgba(37, 99, 235, 0.35);
    --tb-btn-secondary-bg: #1e3a5f;
    --tb-btn-secondary-text: #e0f2fe;
    --tb-btn-secondary-border: #2563eb;
    --tb-btn-secondary-hover: #1d4ed8;
    --tb-btn-primary-bg: #2563eb;
    --tb-btn-primary-text: #ffffff;
    --tb-btn-primary-hover: #3b82f6;
    --tb-btn-success-bg: #047857;
    --tb-btn-success-text: #ffffff;
    --tb-btn-success-hover: #059669;
}

/* ========== إلغاء الخلفيات السوداء + تناسق النص مع الخلفية ========== */
.bg-black {
    background: var(--bg-primary) !important;
    color: var(--text-primary) !important;
}
.bg-black\/80,
.bg-black\/70 {
    background: color-mix(in srgb, var(--bg-primary) 92%, transparent) !important;
}
.bg-black\/50 {
    background: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
}
.bg-black\/30,
.bg-black\/25 {
    background: var(--bg-input) !important;
    color: var(--text-primary) !important;
}
.bg-gray-950,
.bg-gray-900 {
    background: var(--bg-card) !important;
    color: var(--text-primary) !important;
}
.bg-gray-900\/80,
.bg-gray-900\/50,
.bg-gray-900\/30 {
    background: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
}
.bg-black .text-white,
.bg-black .text-gray-100,
.bg-black .text-gray-200,
.bg-black .text-gray-300,
.bg-black .text-gray-400,
.bg-black\/50 .text-white,
.bg-black\/50 .text-gray-100,
.bg-black\/50 .text-gray-200,
.bg-black\/50 .text-gray-300,
.bg-black\/50 .text-gray-400,
.bg-black\/30 .text-white,
.bg-black\/30 .text-gray-300,
.bg-black\/30 .text-gray-400,
.bg-gray-900 .text-white,
.bg-gray-900 .text-gray-100,
.bg-gray-900 .text-gray-200,
.bg-gray-900 .text-gray-300,
.bg-gray-900 .text-gray-400,
.bg-gray-900\/50 .text-white,
.bg-gray-900\/50 .text-gray-300,
.bg-gray-900\/50 .text-gray-400 {
    color: var(--text-primary) !important;
}
.bg-black .text-gray-800,
.bg-black .text-gray-900,
.bg-black .text-black,
.bg-gray-900 .text-gray-800,
.bg-gray-900 .text-gray-900,
.bg-gray-900 .text-black {
    color: var(--text-primary) !important;
}
